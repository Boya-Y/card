:root{--bg:#0e0f13;--panel:#161922;--text:#e6e8ef;--muted:#9aa3b2;--accent:#57d897;--danger:#ff6b6b;--energy:#ffd166;--card-w:120px;--card-h:168px;--hand-h:180px}
*{box-sizing:border-box}
html,body{margin:0;height:100%;background:var(--bg);color:var(--text);font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji"}

/* 竖屏优先布局（更小的移动容器宽度） */
.app{max-width:420px;margin:0 auto;padding:12px;display:flex;flex-direction:column;gap:10px;min-height:100dvh}
.topbar{display:flex;justify-content:center;align-items:center;background:var(--panel);border-radius:10px;padding:8px;color:var(--muted)}
.hud{display:flex;flex-direction:column;gap:10px}
.player-panel,.enemy-panel{background:var(--panel);border-radius:12px;padding:12px}
.stats{display:flex;gap:12px;flex-wrap:wrap;color:var(--muted);font-size:13px}
.piles{margin-top:6px;display:flex;gap:16px;color:var(--muted)}

.arena{background:linear-gradient(180deg,#161922,#10131a);border-radius:12px;min-height:320px;padding:10px;display:flex;flex-direction:column;gap:10px;position:relative}
.log{height:100px;overflow:auto;background:#0f1218;border-radius:8px;padding:8px;font-size:13px;color:#cbd5e1}
/* 手牌：固定高度 + 横向滚动，避免换行导致的布局跳动 */
.hand{display:flex;gap:8px;flex-wrap:nowrap;justify-content:flex-start;overflow-x:auto;overflow-y:hidden;height:var(--hand-h);-webkit-overflow-scrolling:touch;scrollbar-width:none}
.hand::-webkit-scrollbar{display:none}
/* 卡牌：固定尺寸，防止因换行/缩放导致整体高度变化 */
.card{background:#1d2230;border:1px solid #2b3346;border-radius:10px;padding:10px;flex:0 0 var(--card-w);width:var(--card-w);height:var(--card-h);box-shadow:0 4px 12px rgba(0,0,0,.3);display:flex;flex-direction:column}
.card h3{margin:0 0 6px;font-size:15px;line-height:1.1}
.card .meta{display:flex;justify-content:space-between;font-size:12px;color:var(--muted)}
.card .desc{margin-top:6px;color:#e2e8f0;font-size:12px;min-height:36px;flex:1}
.btn{background:#2a3146;color:#e6e8ef;border:none;border-radius:8px;padding:8px 12px;cursor:pointer}
.btn.primary{background:var(--accent);color:#08130f}
.btn:disabled{opacity:.6;cursor:not-allowed}
.controls{display:flex;gap:8px;justify-content:space-between;position:sticky;bottom:0;padding-bottom:calc(8px + env(safe-area-inset-bottom))}

/* 模态弹窗 */
.modal.hidden{display:none}
.modal{position:fixed;inset:0;display:grid;place-items:center}
.modal-backdrop{position:absolute;inset:0;background:rgba(0,0,0,.5)}
.modal-panel{position:relative;background:#111522;border:1px solid #2b3346;border-radius:12px;max-width:420px;width:92%;padding:16px;box-shadow:0 10px 24px rgba(0,0,0,.5)}
.reward-options{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin-top:12px}
.reward-card{background:#1d2230;border:1px solid #2b3346;border-radius:10px;padding:10px;width:46%;max-width:200px}
.modal-actions{display:flex;justify-content:flex-end;margin-top:12px}

/* 大屏优化：放大卡牌与手牌高度 */
@media (min-width:720px){
  :root{--card-w:160px;--card-h:210px;--hand-h:220px}
  .app{max-width:900px}
  .hud{display:grid;grid-template-columns:1fr 1fr}
}

/* 地图视图 */
.map{background:linear-gradient(180deg,#151824,#0e1017);border-radius:12px;padding:10px;display:flex;flex-direction:column;gap:10px}
.map-row{display:flex;justify-content:center;gap:12px}
.node{background:#1b2030;border:1px solid #2b3346;border-radius:999px;padding:8px 12px;color:#e6e8ef;cursor:pointer}
.node.active{background:var(--accent);color:#08130f}
.node.rest{background:#2a3146}

/* 飘字效果 */
.float-text{position:absolute;pointer-events:none;animation:floatUp .9s ease-out forwards;font-weight:700}
.float-dmg{color:var(--danger);text-shadow:0 1px 2px rgba(0,0,0,.5)}
.float-block{color:var(--accent);text-shadow:0 1px 2px rgba(0,0,0,.5)}
@keyframes floatUp{0%{transform:translateY(0);opacity:1}100%{transform:translateY(-24px);opacity:0}}

/* 手牌容器与滑动提示 */
.hand-wrap{position:relative}
.hand-fade{position:absolute;top:0;bottom:0;width:36px;pointer-events:none;z-index:2}
.hand-fade.left{left:0;background:linear-gradient(90deg,rgba(14,15,19,1),rgba(14,15,19,0))}
.hand-fade.right{right:0;background:linear-gradient(270deg,rgba(14,15,19,1),rgba(14,15,19,0))}
/* 调整：将“滑动查看更多”放到手牌下方，以块级元素呈现 */
.hand-hint{position:static;left:auto;bottom:auto;transform:none;display:block;width:100%;text-align:center;margin-top:6px}
/* 首次出现后永久隐藏（JS 加 .scrolled），用 display:none 移除占位 */
.hand-wrap.scrolled .hand-hint{display:none;opacity:1}
/* 通用隐藏工具类 */
.hidden{display:none !important}
/* 确保模态层级最高，避免被手牌渐隐/提示遮挡 */
.modal{z-index:1000}
.hand-wrap.scrolled .hand-hint{opacity:0;transition:opacity .25s ease}

/* 覆盖层不遮挡点击（指明 hand 上方的渐隐仅做提示）*/
.hand-fade,.hand-hint{pointer-events:none}
/* 非战斗时隐藏手牌区（在进入地图、奖励时由JS切换display）*/
#hand-wrap{display:none}

/* 牌库入口为次级文字按钮 */
.link{background:none;border:none;color:var(--muted);text-decoration:underline;cursor:pointer;padding:0;font-size:14px}

/* 牌库列表：竖向滚动容器，卡片小尺寸网格 */
.deck-list{max-height:60vh;overflow:auto;display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:8px;padding:4px}
.deck-list .card{width:100%;height:auto;min-height:120px}
.card{background:#1d2230;border:1px solid #2b3346;border-radius:10px;padding:10px;flex:0 0 var(--card-w);width:var(--card-w);height:var(--card-h);box-shadow:0 4px 12px rgba(0,0,0,.3);display:flex;flex-direction:column}
.card h3{margin:0 0 6px;font-size:15px;line-height:1.1}
.card .meta{display:flex;justify-content:space-between;font-size:12px;color:var(--muted)}
.card .desc{margin-top:6px;color:#e2e8f0;font-size:12px;min-height:36px;flex:1}
.btn{background:#2a3146;color:#e6e8ef;border:none;border-radius:8px;padding:8px 12px;cursor:pointer}
.btn.primary{background:var(--accent);color:#08130f}
.btn:disabled{opacity:.6;cursor:not-allowed}
.controls{display:flex;gap:8px;justify-content:space-between;position:sticky;bottom:0;padding-bottom:calc(8px + env(safe-area-inset-bottom))}

/* 模态弹窗 */
.modal.hidden{display:none}
.modal{position:fixed;inset:0;display:grid;place-items:center}
.modal-backdrop{position:absolute;inset:0;background:rgba(0,0,0,.5)}
.modal-panel{position:relative;background:#111522;border:1px solid #2b3346;border-radius:12px;max-width:420px;width:92%;padding:16px;box-shadow:0 10px 24px rgba(0,0,0,.5)}
.reward-options{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin-top:12px}
.reward-card{background:#1d2230;border:1px solid #2b3346;border-radius:10px;padding:10px;width:46%;max-width:200px}
.modal-actions{display:flex;justify-content:flex-end;margin-top:12px}

/* 大屏优化：放大卡牌与手牌高度 */
@media (min-width:720px){
  :root{--card-w:160px;--card-h:210px;--hand-h:220px}
  .app{max-width:900px}
  .hud{display:grid;grid-template-columns:1fr 1fr}
}

/* 地图视图 */
.map{background:linear-gradient(180deg,#151824,#0e1017);border-radius:12px;padding:10px;display:flex;flex-direction:column;gap:10px}
.map-row{display:flex;justify-content:center;gap:12px}
.node{background:#1b2030;border:1px solid #2b3346;border-radius:999px;padding:8px 12px;color:#e6e8ef;cursor:pointer}
.node.active{background:var(--accent);color:#08130f}
.node.rest{background:#2a3146}

/* 飘字效果 */
.float-text{position:absolute;pointer-events:none;animation:floatUp .9s ease-out forwards;font-weight:700}
.float-dmg{color:var(--danger);text-shadow:0 1px 2px rgba(0,0,0,.5)}
.float-block{color:var(--accent);text-shadow:0 1px 2px rgba(0,0,0,.5)}
@keyframes floatUp{0%{transform:translateY(0);opacity:1}100%{transform:translateY(-24px);opacity:0}}

/* 手牌容器与滑动提示 */
.hand-wrap{position:relative}
.hand-fade{position:absolute;top:0;bottom:0;width:36px;pointer-events:none;z-index:2}
.hand-fade.left{left:0;background:linear-gradient(90deg,rgba(14,15,19,1),rgba(14,15,19,0))}
.hand-fade.right{right:0;background:linear-gradient(270deg,rgba(14,15,19,1),rgba(14,15,19,0))}
.hand-hint{position:absolute;bottom:6px;left:50%;transform:translateX(-50%);font-size:12px;color:var(--muted);background:rgba(0,0,0,.35);padding:4px 8px;border-radius:999px;z-index:3;backdrop-filter:blur(2px)}
.hand-wrap.scrolled .hand-hint{opacity:0;transition:opacity .25s ease}

/* 覆盖层不遮挡点击（指明 hand 上方的渐隐仅做提示）*/
.hand-fade,.hand-hint{pointer-events:none}
/* 商店与遗物、胜利面板样式 */
.shop-list{display:flex;flex-direction:column;gap:16px;max-height:66vh;overflow:auto}
.shop-sec{display:grid;grid-template-columns:1fr;gap:10px}
.shop-item{background:#1d2230;border:1px solid #2b3346;border-radius:10px;padding:10px}
.shop-item .title{font-weight:700;margin-bottom:4px}
.shop-item .meta{color:var(--muted);font-size:12px;margin-bottom:4px}
.shop-item .desc{color:#e2e8f0;font-size:12px;margin-bottom:6px}
.shop-item .price{color:#ffd166}
.relic-info{padding:10px;background:#1d2230;border:1px solid #2b3346;border-radius:8px}
.victory-stats{list-style:none;margin:8px 0 0;padding:0;display:flex;flex-direction:column;gap:6px}

/* 地图节点差异化 */
.node.shop{background:#274049}
.node.elite{background:#3b2f46}
.node.boss{background:#462f2f}
.node.active{background:var(--accent);color:#08130f}
.node.rest{background:#2a3146}

/* 飘字效果 */
.float-text{position:absolute;pointer-events:none;animation:floatUp .9s ease-out forwards;font-weight:700}
.float-dmg{color:var(--danger);text-shadow:0 1px 2px rgba(0,0,0,.5)}
.float-block{color:var(--accent);text-shadow:0 1px 2px rgba(0,0,0,.5)}
@keyframes floatUp{0%{transform:translateY(0);opacity:1}100%{transform:translateY(-24px);opacity:0}}

/* 手牌容器与滑动提示 */
.hand-wrap{position:relative}
.hand-fade{position:absolute;top:0;bottom:0;width:36px;pointer-events:none;z-index:2}
.hand-fade.left{left:0;background:linear-gradient(90deg,rgba(14,15,19,1),rgba(14,15,19,0))}
.hand-fade.right{right:0;background:linear-gradient(270deg,rgba(14,15,19,1),rgba(14,15,19,0))}
.hand-hint{position:absolute;bottom:6px;left:50%;transform:translateX(-50%);font-size:12px;color:var(--muted);background:rgba(0,0,0,.35);padding:4px 8px;border-radius:999px;z-index:3;backdrop-filter:blur(2px)}
.hand-wrap.scrolled .hand-hint{opacity:0;transition:opacity .25s ease}

/* 覆盖层不遮挡点击（指明 hand 上方的渐隐仅做提示）*/
.hand-fade,.hand-hint{pointer-events:none}